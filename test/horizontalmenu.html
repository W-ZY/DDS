<!DOCTYPE html>
<html lang="en">
<head>
    <title id="Description">jQuery Menu - Horizontal Menu Sample</title>
</head>

<body>
    <div id="content">
    	<div class="header">
    <div id="headerImage" align="center"><a href="#"><img src="../header.png" alt="Insert Logo Here" name="Insert_logo" id="Insert_logo" style="background-color: #009900; display: block; background-size: cover; background-repeat: no-repeat; width: 100%; height: 90px"><a href="#"></a>
      
    </div>
        <!-- title with the dining hall name, date and meal time-->
        <p style="font-size:23px">
          <label id="location">Welcome to </label>
          <label id="date&meal"></label>
        </p>
        
        <!--the tag buttons to toggle on/off-->
        <p>
        <label>Ingredient: </label>
        <input type="button" value="Vegeterian" id="VegeterianButton" />
        <input type="button" value="Gluten Free" id="GlutenFreeButton" />
        <input type="button" value="Local or Regional" id="LocalButton" />
        <input type="button" value="Kosher" id="KosherButton"/>
        <input type="button" value="Halal" id="HalalButton" />
        <input type="button" value="Vegan" id="VeganButton" />
        </p>
        
        <p>
        <label>Allergens: </label>
        <input type="button" value="Egg" id="EggButton" />
        <input type="button" value="Fish" id="FishButton" />
        <input type="button" value="Dairy" id="DairyButton" />
        <input type="button" value="TreeNuts" id="TreeNutsButton" />
        <input type="button" value="Peanuts" id="PeanutsButton" />
        <input type="button" value="Pork" id="PorkButton" />
        <input type="button" value="Soy" id="SoyButton" />
        <input type="button" value="Shellfish" id="ShellfishButton" />
        <input type="button" value="Wheat" id="WheatButton" />
        </p>

		<p style="font-size:10px">
			Hint: Move mouse over one category to see dishes, click on one dish to add it to the meal list below
		</p>


        <div id='jqxMenu'>
            <ul>
                <li id="stir-fry">Stir-Fry                  	
                    <ul>
                        <li><a href="#" data-tooltip="Calory: 90 <br/> Fat: 1g <br/> Protein: 2g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Brown Rice</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 150 <br/> Fat: 4.5g <br/> Protein: 24g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Chicken</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 140 <br/> Fat: 0g <br/> Protein: 3g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Teriyaki Sauce</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 270 <br/> Fat: 12g <br/> Protein: 0g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Medium Sauce</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 100 <br/> Fat: 7g <br/> Protein: 11g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Tofu</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 240 <br/> Fat: 0.5g <br/> Protein: 5g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">White Rice</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 35 <br/> Fat: 0g <br/> Protein: 1g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Vegetables</a></li>
                    </ul>
                </li>
                
                <li id="pasta">Pasta/Omeletes               	
                    <ul>
                        <li><a href="#" data-tooltip="Calory: 250 <br/> Fat: 1g <br/> Protein: 9g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Pasta Ziti</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 250 <br/> Fat: 2.5g <br/> Protein: 12g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">High Protein Penne Pasta</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 190 <br/> Fat: 16g <br/> Protein: 5g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Alfredo Sauce Pasta</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 380 <br/> Fat: 37g <br/> Protein: 10g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Whole Eggs Omelet</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 110 <br/> Fat: 9g <br/> Protein: 7g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Egg Whites Omelet</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 290 <br/> Fat: 27g <br/> Protein: 10g" nutrition-fact="290,27,10,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Omelet Filling Cheddar</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 20 <br/> Fat: 0g <br/> Protein: 1g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Black Bean Omelet</a></li>
                    </ul>
                </li>
                
                <li id="beverages">Beverages                	
                    <ul>
                        <li><a href="#" data-tooltip="Calory: 110 <br/> Fat: 0g <br/> Protein: 0g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Apple Juice</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 120 <br/> Fat: 0g <br/> Protein: 0g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Cranberry Juice</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 100 <br/> Fat: 0g <br/> Protein: 2g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Orange Juice</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 130 <br/> Fat: 0g <br/> Protein: 8g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Chocolate Milk</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 120 <br/> Fat: 5g <br/> Protein: 8g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">2% Milk</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 80 <br/> Fat: 0g <br/> Protein: 8g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Skim Milk</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 80 <br/> Fat: 10g <br/> Protein: 18g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0"></a></li>
                    </ul>
                </li>
                
                <li id="saladbar">Salad Bar                  	
                    <ul>
                        <li><a href="#" data-tooltip="Calory: 270 <br/> Fat: 18g <br/> Protein: 27g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Chicken Salad</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 5 <br/> Fat: 0g <br/> Protein: <1g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Grilled Portabella</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 25 <br/> Fat: 0g <br/> Protein: <1g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Corn Salad</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 20 <br/> Fat: 0g <br/> Protein: 1g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Green Peas Salad</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 5 <br/> Fat: 0g <br/> Protein: 0g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Mixed Greens</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 10 <br/> Fat: 0g <br/> Protein: <1g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Broccoli Florets</a></li>
                        
                        <li><a href="#" data-tooltip="Calory: 50 <br/> Fat: 0.5g <br/> Protein: 11g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Tuna Fish</a></li>
                        </ul>
                    </li>
                    
                    <li id="sandwichsushi">Sandwich/Sushi
                        <ul>
                            <li><a href="#" data-tooltip="Calory: 290 <br/> Fat: 4.5g <br/> Protein: 22g" nutrition-fact="290,4,22,30,800,15,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0">Turkey WW Sandwich</a></li>
                            
                            <li><a href="#" data-tooltip="Calory: 320 <br/> Fat: 10g <br/> Protein: 21g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Tuna WW Sandwich</a></li>
                            
                            <li><a href="#" data-tooltip="Calory: 420 <br/> Fat: 17g <br/> Protein: 32g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">NC Chicken Salad WW Sandwich</a></li>
                            
                            <li><a href="#" data-tooltip="Calory: 320 <br/> Fat: 7g <br/> Protein: 25g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Roast Beef WW Sandwich</a></li>
                            
                            <li><a href="#" data-tooltip="Calory: 380 <br/> Fat: 12g <br/> Protein: 28g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Ham Swiss WW Sandwich</a></li>
                        </ul>
                    </li>
                    
                    <li id="smoothies">Smoothies
                        <ul>
                        	<li><a href="#" data-tooltip="Calory: 30 <br/> Fat: 0g <br/> Protein: 0g" nutrition-fact="30,0,0,0,0,130,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0">Banana</a></li>
                           
                            <li><a href="#" data-tooltip="Calory: 30 <br/> Fat: 0g <br/> Protein: 0g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Blueberries</a></li>
                            
                            <li><a href="#" data-tooltip="Calory: 35 <br/> Fat: 0g <br/> Protein: 0g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Mango</a></li>
                            
                            <li><a href="#" data-tooltip="Calory: 10 <br/> Fat: 0g <br/> Protein: 0g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Peach Slices</a></li>
                            
                            <li><a href="#" data-tooltip="Calory: 25 <br/> Fat: 0g <br/> Protein: 0g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Pineapple Chunks</a></li>
                            
                            <li><a href="#" data-tooltip="Calory: 90 <br/> Fat: 0g <br/> Protein: 1g" nutrition-fact="380,37,13,425,125,120,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0">Orange Juice</a></li>
                         </ul>
                    </li>                    
                </ul>
            </div>
        </div>
    </div>
    <br>
    <p style="font-size:10px">
	Meal Planner: Double click on one food in the list to see its full nutrition facts
	</p>
    
    <!--div id='meallist'>
    </div>
    
    <div style="font-size: 12px; font-family: Verdana;" id="selectionlog">
    </div-->
    
    <div id='list'></div>
    
    <div style="font-size: 12px; font-family: Verdana;" id="log">
    </div>
    <p>
    <label id="meal">Total calories: 0   fat: 0g   protein: 0g</label>
    <!--label id="meal">Total calory: 290   fat: 27g   protein: 10g</label-->
    <!--label id="meal">Total calory: 670   fat: 64g   protein: 13g</label-->

    <input type="button" id="showfull" value="Show Full" width="200"/>
    <input type="button" id="delete" value="Delete selected" width="200"/>
    
    <input type="button" id="back" value="Back" />
    
    </p>

	<!--p>Full nutrition facts table of one dish</p-->
    <div id='jqxwindow' title="Full Nutritions">
    	<div>
        	<!-- prefix d stands for "dish"-->
            <p id="dcalory">calory: 0</p>
            <p id="dfat">fat: 0g</p>
            <p id="dprotein">protein: 0g</p>
            <p id="dcholesterol">cholesterol: 0mg</p>
            <p id="dsodium">sodium: 0mg</p>
            <p id="dpotassium">Potassium: 0mg</p>
        	<input type="button" value="Close" id="close_window" />
        </div>div>
	</div>
    
    <!--p>Full nutrition facts table of the meal</p-->
    <div id='fullnutrition' title="Meal Nutritions">
		<div>
        	<!-- prefix mt stands for "mealtotal"-->
            <p id="mtcalory">calory: 0</p>
            <p id="mtfat">fat: 0g</p>
            <p id="mtprotein">protein: 0g</p>
            <p id="mtcholesterol">cholesterol: 0mg</p>
            <p id="mtsodium">sodium: 0mg</p>
            <p id="mtpotassium">Potassium: 0mg</p>

        	<input type="button" value="Close" id="button_no" />
        </div>div>
	</div>
</body>

<link rel="stylesheet" href="jqx.base.css" type="text/css" />
<link rel="stylesheet" href="DDSgreen.css" type="text/css" />
<script type="text/javascript" src="jquery-1.11.1.min.js"></script> 
<script type="text/javascript" src="jqxcore.js"></script>
<script type="text/javascript" src="jqxmenu.js"></script>
<script type="text/javascript" src="jqxtooltip.js"></script>
<script type="text/javascript" src="jqxcheckbox.js"></script>
<script type="text/javascript" src="jqxlistbox.js"></script>
<script type="text/javascript" src="jqxbuttons.js"></script>
<script type="text/javascript" src="jqxscrollbar.js"></script>
<script type="text/javascript" src="jqxwindow.js"></script>
<script src="jquery-ui.js"></script>

<script>
$(document).ready(function() {
    var obj=GetRequest();
    // alert(obj.date+"--"+obj.meal+"--"+obj.location);
	// change the welcome word
	$("#location").append(obj.location + " on " + obj.date + " for " + obj.meal);
	//$("#location").append("Collis Cafe on 05/20/17 for Lunch");
	
	// function to retrieve location/data/meal
	function GetRequest() {
	   var url = location.search;
	   //alert(url);
	   var theRequest = new Object();
	   if (url.indexOf("?") != -1) {
		  var str = url.substr(1);
		  strs = str.split("&");
		  for(var i = 0; i < strs.length; i ++) {
			 theRequest[strs[i].split("=")[0]]=decodeURIComponent((strs[i].split("=")[1]));
		  }
	   }
	   return theRequest;
	}
	
	//add tags (they are buttons)
	/*
	$("#VegeterianButton").jqxToggleButton({disabled: true});
	$("#GlutenFreeButton").jqxToggleButton({disabled: true});
	$("#LocalButton").jqxToggleButton({disabled: true});
	$("#KosherButton").jqxToggleButton({disabled: true});
	$("#HalalButton").jqxToggleButton({disabled: true});
	$("#VeganButton").jqxToggleButton({disabled: true});
	$("#EggButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#FishButton").jqxToggleButton({disabled: true});
	$("#DairyButton").jqxToggleButton({disabled: true});
	$("#TreeNutsButton").jqxToggleButton({disabled: true});
	$("#PeanutsButton").jqxToggleButton({disabled: true});
	$("#PorkButton").jqxToggleButton({disabled: true});
	$("#SoyButton").jqxToggleButton({disabled: true});
	$("#ShellfishButton").jqxToggleButton({disabled: true});
	$("#WheatButton").jqxToggleButton({disabled: true});
	*/
	
	///*
	$("#VegeterianButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#GlutenFreeButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#LocalButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#KosherButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#HalalButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#VeganButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#EggButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#FishButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#DairyButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#TreeNutsButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#PeanutsButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#PorkButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#SoyButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#ShellfishButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	$("#WheatButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
	//*/
	
	// add the main menu
    $("#jqxMenu").jqxMenu({
      width: 660,
      height: 30,
	  theme: 'DDSgreen'
    });

	// add tooltip
    var items = $("[data-tooltip]");
    for (var i = 0; i < items.length; i++) {
      var liElement = $(items[i]).parent();
      var content = $(items[i]).attr("data-tooltip");
      liElement.jqxTooltip({
        content: content
      });
    }
	
	
	
	$("#stir-fry").jqxTooltip({content: '<img src="./smap/co/CollisStirFry.jpg" />', position: 'absolute', absolutePositionX: 800, absolutePositionY: 100, animationHideDelay:23000});
	$("#pasta").jqxTooltip({content: '<img src="./smap/co/CollisPasta.jpg" />', position: 'absolute', absolutePositionX: 800, absolutePositionY: 100, animationHideDelay:23000});
	$("#beverages").jqxTooltip({content: '<img src="./smap/co/CollisBeverages.jpg" />', position: 'absolute', absolutePositionX: 800, absolutePositionY: 100, animationHideDelay:23000});
	$("#saladbar").jqxTooltip({content: '<img src="./smap/co/CollisSaladBar.jpg" />', position: 'absolute', absolutePositionX: 800, absolutePositionY: 100, animationHideDelay:23000});
	$("#sandwichsushi").jqxTooltip({content: '<img src="./smap/co/CollisSandwiches.jpg" />', position: 'absolute', absolutePositionX: 800, absolutePositionY: 100, animationHideDelay:23000});
	$("#smoothies").jqxTooltip({content: '<img src="./smap/co/CollisSmoothies.jpg" />', position: 'absolute', absolutePositionX: 800, absolutePositionY: 100, animationHideDelay:23000});
	
	// click on the main menu
	$('#jqxMenu').on('itemclick', function (event) {
    	var element = event.args;
		var itemtext = event.target.innerHTML;//$(args).text();
		var that = this;
		setTimeout(function () {
			var dblclick = parseInt($(that).data('double'), 10);
			if (dblclick > 0) {
				alert("double click");
				$(that).data('double', dblclick - 1);
			} else {
				//alert(element.innerHTML);
				var data = $(event.target).attr("nutrition-fact");
				if (typeof data != "undefined") {
					//alert(source.length);
					var arr = data.split(',');				
					// extract nutritions
					totalCalory = parseInt(totalCalory) + parseInt(arr[0]);
					totalFat = parseInt(totalFat) + parseInt(arr[1]);
					totalProtein = parseInt(totalProtein) + parseInt(arr[2]);
					totalCholesterol = parseInt(totalCholesterol) + parseInt(arr[3]);
					totalSodium  = parseInt(totalSodium) + parseInt(arr[4]);
					totalPotassium = parseInt(totalPotassium) + parseInt(arr[5]);
					
					// record total nutrition for future use
					$('#meal').text("Total Calories: " + totalCalory + " fat: " + totalFat + "g protein: " + totalProtein + "g");
					$('#dcalory').text("Total Calories: " + arr[0]);
					$('#dfat').text("Fat: " + arr[1] + " g");
					$('#dprotein').text("Protein: " + arr[2] + " g");
					$('#dcholesterol').text("Cholesterol: " + arr[3] + " mg");
					$('#dsodium').text("Sodium: " + arr[4] + " mg");
					$('#dpotassium').text("Potassium: " + arr[5] + " mg");
					
					$('#mtcalory').text("Total Calories: " + totalCalory);
					$('#mtfat').text("Fat: " + totalFat + " g");
					$('#mtprotein').text("Protein: " + totalProtein + " g");
					$('#mtcholesterol').text("Cholesterol: " + totalCholesterol + " mg");
					$('#mtsodium').text("Sodium: " + totalSodium + " mg");
					$('#mtpotassium').text("Potassium: " + totalPotassium + " mg");

					/*source.push(
						{
							label: itemtext,
							value: data	
						}
					);
					$("#meallist").jqxListBox('refresh', true);*/
					//alert(source.length);
					lsource.push(
						{
							label: itemtext,
							value: data	
						}
					);
					$("#list").jqxListBox('refresh', true);
					$("#list .jqx-listitem-element").dblclick(function (event) {
						var title = event.target.innerHTML;
						$("#jqxwindow").jqxWindow('setTitle', title);
						$("#jqxwindow").jqxWindow('open');
					});
				}
				//$("#jqxWidget").jqxListBox('unselectIndex', index);
			}
		}, 300);
    });
	
	//delete selected item
	/*$("#delete").click(function () {
		var item = $('#meallist').jqxListBox('getSelectedItem');
		//var item = $('#list').jqxListBox('getSelectedItem');
		if (item != null) {
			var data = item.value;
			//alert(data);
			var arr = data.split(',');				
			// extract nutritions
			totalCalory = parseInt(totalCalory) - parseInt(arr[0]);
			totalFat = parseInt(totalFat) - parseInt(arr[1]);
			totalProtein = parseInt(totalProtein) - parseInt(arr[2]);
			totalCholesterol = parseInt(totalCholesterol) - parseInt(arr[3]);
			totalSodium  = parseInt(totalSodium) - parseInt(arr[4]);
			totalPotassium = parseInt(totalPotassium) - parseInt(arr[5]);
			
			$('#meal').text("Total calory: " + totalCalory + " fat: " + totalFat + "g protein: " + totalProtein + "g");
			
			$('#mtcalory').text("Calory: " + totalCalory);
			$('#mtfat').text("Fat: " + totalFat + " g");
			$('#mtprotein').text("Protein: " + totalProtein + " g");
			$('#mtcholesterol').text("Cholesterol: " + totalCholesterol + " g");
			$('#mtsodium').text("Sodium: " + totalSodium + " g");
			$('#mtpotassium').text("Potassium: " + totalPotassium + " g");
			//alert(item.index);
			//alert(source.length);
			source.splice(item.index, 1);
			$("#meallist").jqxListBox('refresh', true);
			$("#selectionlog").children().remove();
			//alert(source.length);
			$("#VegeterianButton").jqxToggleButton({toggled: false});
			$("#GlutenFreeButton").jqxToggleButton({toggled: false});
			$("#LocalButton").jqxToggleButton({toggled: false});
			$("#KosherButton").jqxToggleButton({toggled: false});
			$("#HalalButton").jqxToggleButton({toggled: false});
			$("#VeganButton").jqxToggleButton({toggled: false});
			$("#EggButton").jqxToggleButton({toggled: false});
			$("#FishButton").jqxToggleButton({toggled: false});
			$("#DairyButton").jqxToggleButton({toggled: false});
			$("#TreeNutsButton").jqxToggleButton({toggled: false});
			$("#PeanutsButton").jqxToggleButton({toggled: false});
			$("#PorkButton").jqxToggleButton({toggled: false});
			$("#SoyButton").jqxToggleButton({toggled: false});
			$("#ShellfishButton").jqxToggleButton({toggled: false});
			$("#WheatButton").jqxToggleButton({toggled: false});
		}
	});*/
		$("#list").bind('select', function (event) {
	//$("#meallist").click(function(event) {
		var args = event.args; //alert("select");
			for(var i = 0; i<lsource.length; i++){
				if(i!=args.index){
					$("#list").jqxListBox('unselectIndex', i);
				}
				else{
					$("#list").jqxListBox('selectIndex', i);
				}
			}
			
			
        var item = $('#list').jqxListBox('getItem', args.index);
		if (event.args) {
			var item = event.args.item;
			if (item) {
				var arr = item.value.split(',');
				//alert(arr[1]);
				
				var valueelement = $("<div></div>");
				valueelement.text("Calories: " + arr[0] + " fat: " + arr[1] + "g protein: " + arr[2] + "g");
	
				//$("#selectionlog").children().remove();
				//$("#selectionlog").append(valueelement);
				
				$("#log").children().remove();
				$("#log").append(valueelement);
				
				if (arr[6] > 0) {
					$("#VegeterianButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#VegeterianButton").jqxToggleButton({toggled: false});
					//$("#VegeterianButton").jqxToggleButton({disabled:true});
				}
				if (arr[7] > 0) {
					$("#GlutenFreeButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#GlutenFreeButton").jqxToggleButton({toggled: false});
					//$("#GlutenFreeButton").jqxToggleButton({disabled:true});
				}
				if (arr[8] > 0) {
					$("#LocalButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#LocalButton").jqxToggleButton({toggled: false});
					//$("#LocalButton").jqxToggleButton({disabled:true});
				}
				if (arr[9] > 0) {
					$("#KosherButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#KosherButton").jqxToggleButton({toggled: false});
					//$("#KosherButton").jqxToggleButton({disabled:true});
				}
				if (arr[10] > 0) {
					$("#HalalButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#HalalButton").jqxToggleButton({toggled: false});
					//$("#HalalButton").jqxToggleButton({disabled:true});
				}
				if (arr[11] > 0) {
					$("#VeganButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#VeganButton").jqxToggleButton({toggled: false});
					//$("#VeganButton").jqxToggleButton({disabled:true});
				}
				if (arr[12] > 0) {
					$("#EggButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#EggButton").jqxToggleButton({toggled:false});
					//$("#EggButton").jqxToggleButton({disabled:true});
				}
				if (arr[13] > 0) {
					$("#FishButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#FishButton").jqxToggleButton({toggled: false});
					//$("#FishButton").jqxToggleButton({disabled:true});
				}
				if (arr[14] > 0) {
					$("#DairyButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#DairyButton").jqxToggleButton({toggled: false});
					//$("#DairyButton").jqxToggleButton({disabled:true});
				}
				if (arr[15] > 0) {
					$("#TreeNutsButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#TreeNutsButton").jqxToggleButton({toggled: false});
					//$("#TreeNutsButton").jqxToggleButton({disabled:true});
				}
				if (arr[16] > 0) {
					$("#PeanutsButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#PeanutsButton").jqxToggleButton({toggled: false});
					//$("#PeanutsButton").jqxToggleButton({disabled:true});
				}
				if (arr[17] > 0) {
					$("#PorkButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#PorkButton").jqxToggleButton({toggled: false});
					//$("#PorkButton").jqxToggleButton({disabled:true});
				}
				if (arr[18] > 0) {
					$("#SoyButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#SoyButton").jqxToggleButton({toggled: false});
					//$("#SoyButton").jqxToggleButton({disabled:true});
				}
				if (arr[19] > 0) {
					$("#ShellfishButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#ShellfishButton").jqxToggleButton({toggled: false});
					//$("#ShellfishButton").jqxToggleButton({disabled:true});
				}
				if (arr[20] > 0) {
					$("#WheatButton").jqxToggleButton({disabled:false, toggled: true, theme: 'DDSgreen'});
				} else {
					$("#WheatButton").jqxToggleButton({toggled: false});
					//$("#WheatButton").jqxToggleButton({disabled:true});
				}
			}
		}
	});
	$("#delete").jqxButton({ width: '140', height: '25'});
	$("#delete").click(function () {
		var item = $('#list').jqxListBox('getSelectedItem');
		//var item = $('#list').jqxListBox('getSelectedItem');
		if (item != null) {
			var data = item.value;
			//alert(data);
			var arr = data.split(',');				
			// extract nutritions
			totalCalory = parseInt(totalCalory) - parseInt(arr[0]);
			totalFat = parseInt(totalFat) - parseInt(arr[1]);
			totalProtein = parseInt(totalProtein) - parseInt(arr[2]);
			totalCholesterol = parseInt(totalCholesterol) - parseInt(arr[3]);
			totalSodium  = parseInt(totalSodium) - parseInt(arr[4]);
			totalPotassium = parseInt(totalPotassium) - parseInt(arr[5]);
			
			$('#meal').text("Total Calories: " + totalCalory + " fat: " + totalFat + "g protein: " + totalProtein + "g");
			
			$('#mtcalory').text("Calory: " + totalCalory);
			$('#mtfat').text("Fat: " + totalFat + " g");
			$('#mtprotein').text("Protein: " + totalProtein + " g");
			$('#mtcholesterol').text("Cholesterol: " + totalCholesterol + " mg");
			$('#mtsodium').text("Sodium: " + totalSodium + " mg");
			$('#mtpotassium').text("Potassium: " + totalPotassium + " mg");
			//alert(item.index);
			//alert(source.length);
			// update meal list after deleting
			lsource.splice(item.index, 1);
			$("#list").jqxListBox('refresh', true);
			$("#list").jqxListBox('unselectIndex', 0);
			$("#log").children().remove();
			$("#list .jqx-listitem-element").dblclick(function (event) {
				var title = event.target.innerHTML;
				$("#jqxwindow").jqxWindow('setTitle', title);
				$("#jqxwindow").jqxWindow('open');
			});		
				
			//alert(source.length);
			
			// update tags
			/*
			$("#VegeterianButton").jqxToggleButton({disabled: true});
			$("#ClutenFreeButton").jqxToggleButton({toggled: false});
			$("#GlutenFreeButton").jqxToggleButton({disabled: true});
			$("#LocalButton").jqxToggleButton({disabled: true});
			$("#KosherButton").jqxToggleButton({disabled: true});
			$("#HalalButton").jqxToggleButton({disabled: true});
			$("#VeganButton").jqxToggleButton({toggled: false});
			$("#VeganButton").jqxToggleButton({disabled: true});
			$("#EggButton").jqxToggleButton({toggled: true, disabled: true});
			$("#FishButton").jqxToggleButton({disabled: true});
			$("#DairyButton").jqxToggleButton({disabled: true});
			$("#TreeNutsButton").jqxToggleButton({disabled: true});
			$("#PeanutsButton").jqxToggleButton({disabled: true});
			$("#PorkButton").jqxToggleButton({disabled: true});
			$("#SoyButton").jqxToggleButton({disabled: true});
			$("#ShellfishButton").jqxToggleButton({disabled: true});
			$("#WheatButton").jqxToggleButton({disabled: true});
			*/
			$("#VegeterianButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
			$("#GlutenFreeButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
			$("#LocalButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
			$("#KosherButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
			$("#HalalButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
			$("#VeganButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
			$("#EggButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
			$("#FishButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
			$("#DairyButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
			$("#TreeNutsButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
			$("#PeanutsButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
			$("#PorkButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
			$("#SoyButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
			$("#ShellfishButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
			$("#WheatButton").jqxToggleButton({toggled: false, theme: 'DDSgreen'});
		}
	});

	// the dialog for meal's full nutritions
	$( "#fullnutrition" ).jqxWindow({ height: 250, width: 320, isModal: true, autoOpen: false, theme:"DDSgreen" });
	$("#button_no").click(function () {
		$("#fullnutrition").jqxWindow('close');
	});

	// your meal list
	var source = [
		/*
		{
			label: "Omelet Filling Cheddar",
			value: "290 27 10 1 1 1"
        },
		{
			label: "Whole Eggs Omelet",
			value: "380 37 13 1 1 1"
		}
		*/
	];
	
	var totalCalory = 0;
	var totalFat = 0;
	var totalProtein = 0;
	var totalCholesterol = 0;
	var totalSodium  = 0;
	var totalPotassium = 0;
	
	// Create a jqxListBox
	//$("#meallist").jqxListBox({width: 200, source: source, checkboxes: true, height: 250});
	$("#meallist").jqxListBox({width: 200, source: source, height: 250, theme: 'DDSgreen'});
	//$("#meallist").jqxListBox('checkIndex', 0);
	
	/*
	$("#meallist .jqx-listitem-element").dblclick(function (event) {
		alert("double");
		var item = $(event.target).text();
		alert(item);
	});
	*/
	  
	$("#meallist .jqx-listitem-element").dblclick(function(e) {
        alert("double");
    });
	/*
	$("#meallist").on('checkChange', function (event) {
		var args = event.args;
		if (args.checked) {
			$("#Events").text("Checked: " + args.label);
		}
		else {
			$("#Events").text("Unchecked: " + args.label);
		}
		var items = $("#listbox").jqxListBox('getCheckedItems');
		var checkedItems = "";
		$.each(items, function (index) {
			if (index < items.length - 1) {
				checkedItems += this.label + ", ";
			}
			else checkedItems += this.label;
		});
	});
	*/
	
	/*$("#meallist").bind('select', function (event) {
	//$("#meallist").click(function(event) {
		var args = event.args;
        var item = $('#meallist').jqxListBox('getItem', args.index);
		if (event.args) {
			var item = event.args.item;
			if (item) {
				var arr = item.value.split(',');
				//alert(arr[1]);
				
				var valueelement = $("<div></div>");
				valueelement.text("calory: " + arr[0] + " fat: " + arr[1] + "g protein: " + arr[2] + "g");
				//var labelelement = $("<div></div>");
				//labelelement.text("Label: " + item.label);
				$("#selectionlog").children().remove();
				//$("#selectionlog").append(labelelement);
				$("#selectionlog").append(valueelement);
				
				$("#log").children().remove();
				//$("#selectionlog").append(labelelement);
				$("#log").append(valueelement);
				
				if (arr[6] > 0) {
					$("#VegeterianButton").jqxToggleButton({toggled: true});
				} else {
					$("#VegeterianButton").jqxToggleButton({toggled: false});
				}
				if (arr[7] > 0) {
					$("#GlutenFreeButton").jqxToggleButton({toggled: true});
				} else {
					$("#GlutenFreeButton").jqxToggleButton({toggled: false});
				}
				if (arr[8] > 0) {
					$("#LocalButton").jqxToggleButton({toggled: true});
				} else {
					$("#LocalButton").jqxToggleButton({toggled: false});
				}
				if (arr[9] > 0) {
					$("#KosherButton").jqxToggleButton({toggled: true});
				} else {
					$("#KosherButton").jqxToggleButton({toggled: false});
				}
				if (arr[10] > 0) {
					$("#HalalButton").jqxToggleButton({toggled: true});
				} else {
					$("#HalalButton").jqxToggleButton({toggled: false});
				}
				if (arr[11] > 0) {
					$("#VeganButton").jqxToggleButton({toggled: true});
				} else {
					$("#VeganButton").jqxToggleButton({toggled: false});
				}
				if (arr[12] > 0) {
					$("#EggButton").jqxToggleButton({toggled: true});
				} else {
					$("#EggButton").jqxToggleButton({toggled: false});
				}
				if (arr[13] > 0) {
					$("#FishButton").jqxToggleButton({toggled: true});
				} else {
					$("#FishButton").jqxToggleButton({toggled: false});
				}
				if (arr[14] > 0) {
					$("#DairyButton").jqxToggleButton({toggled: true});
				} else {
					$("#DairyButton").jqxToggleButton({toggled: false});
				}
				if (arr[15] > 0) {
					$("#TreeNutsButton").jqxToggleButton({toggled: true});
				} else {
					$("#TreeNutsButton").jqxToggleButton({toggled: false});
				}
				if (arr[16] > 0) {
					$("#PeanutsButton").jqxToggleButton({toggled: true});
				} else {
					$("#PeanutsButton").jqxToggleButton({toggled: false});
				}
				if (arr[17] > 0) {
					$("#PorkButton").jqxToggleButton({toggled: true});
				} else {
					$("#PorkButton").jqxToggleButton({toggled: false});
				}
				if (arr[18] > 0) {
					$("#SoyButton").jqxToggleButton({toggled: true});
				} else {
					$("#SoyButton").jqxToggleButton({toggled: false});
				}
				if (arr[19] > 0) {
					$("#ShellfishButton").jqxToggleButton({toggled: true});
				} else {
					$("#SHellfishButton").jqxToggleButton({toggled: false});
				}
				if (arr[20] > 0) {
					$("#WheatButton").jqxToggleButton({toggled: true});
				} else {
					$("#WheatButton").jqxToggleButton({toggled: false});$("#HalalButton").jqxToggleButton({toggled: true});
				}
			}
		 }
	  });*/




	var title = "";
	$("#meallist .jqx-listitem-element").click(function (event) {
		alert("yes");
		var label = event.target.innerHTML;
		title = label;
		alert("yes");
		var index = source.indexOf(label);
		var that = this;
		setTimeout(function () {
			var dblclick = parseInt($(that).data('double'), 10);
			if (dblclick > 0) {
				$(that).data('double', dblclick - 1);
			} else {
				/*
				var item = event.args.item;
				if (item) {
					var caloryelement = $("<div></div>");
					caloryelement.text("Calory: " + item.calory);
					var fatelement = $("<div></div>");
					fatelement.text("Fat: " + item.fat);
					var proteinelement = $("<div></div>");
					proteinement.text("Protein: " + item.protein);
					$("#selectionlog").children().remove();
					$("#selectionlog").append(caloryelement);
					$("#selectionlog").append(fatelement);
					$("#selectionlog").append(proteinement);
				}
				*/
			}
		}, 300);
		}).dblclick(function (event) {
			
			$(this).data('double', 2);
			$("#jqxwindow").jqxWindow('setTitle', title);
			$("#jqxwindow").jqxWindow('open');
		});
	});

	// function to show full nutritions of the meal with a dialog
	$( "#showfull" ).jqxButton({ width: '100', height: '25'});
	$( "#showfull" ).click(function( event ) {
		$("#fullnutrition").jqxWindow('setTitle', 'Meal nutritions');
		$("#fullnutrition").jqxWindow('open');
		//alert('Button is Clicked');
	});

/*
$("#showfull").on('click', function (event) {
	$("#fullnutrition").jqxWindow('open');
    alert('Button is Clicked');
});
*/

	// back to entrance page
	$("#back").jqxButton({ width: '70', height: '25'});
	$("#back").click(function(){
		  window.location.href="../index.html";
	});
	
		
	// window to show dish nutritions after double click
	$("#jqxwindow").jqxWindow({ height: 250, width: 320, isModal: true, autoOpen: false, theme: 'DDSgreen' });
	$("#close_window").click(function () {
		$("#jqxwindow").jqxWindow('close');
	});
	
	var lsource = [  
	  //"Espresso"
	];
	// Create a jqxListBox
	$("#list").jqxListBox({source: lsource, width: 450, height: 250});
	$("#list .jqx-listitem-element").dblclick(function (event) {
		var title = event.target.innerHTML;
		$("#jqxwindow").jqxWindow('setTitle', title);
		$("#jqxwindow").jqxWindow('open');
	});
</script>
</html>
