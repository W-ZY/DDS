<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>DDS Menu</title>
<!-- style for the meal table -->
<style>
table {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    width: 100%;
}

td, th {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
}

tr:nth-child(even) {
    background-color: #dddddd;
}
</style>
</head>

<body>
<div class="header">
    <div align="center"><a href="#"><img src="header.png" alt="Insert Logo Here" name="Insert_logo" width="803" height="100" id="Insert_logo" style="background-color: #009900; display: block;"><a href="#"></a>
      <!-- end .header -->
    </div>
</div>

<!-- title with the dining hall name, date and meal time-->
<p>
  <label id="location">Welcome to </label>
  <label id="date&meal"></label>
</p>

<!--the tag buttons to toggle on/off-->
<p>
<label>Ingredient</label>
<label for="VegeterianButton">Vegeterian</label>
<input type="checkbox" id="VegeterianButton" />
<label for="GlutenFreeButton">Gluten Free</label>
<input type="checkbox" id="GlutenFreeButton" />
<label for="LocalButton">Local or Regional</label>
<input type="checkbox" id="LocalButton" />
<label for="KosherButton">Kosher</label>
<input type="checkbox" id="KosherButton"/>
<label for="HalalButton">Halal</label>
<input type="checkbox" id="HalalButton" />
<label for="VeganButton">Vegan</label>
<input type="checkbox" id="VeganButton" />
</p>
<p>
<label>Allergens</label>
<label for="EggButton">Eggs</label>
<input type="checkbox" id="EggButton" />
<label for="FishButton">Fish</label>
<input type="checkbox" id="FishButton" />
<label for="DairyButton">Dairy</label>
<input type="checkbox" id="DairyButton" />
<label for="TreeNutsButton">Tree Nuts</label>
<input type="checkbox" id="TreeNutsButton" />
<label for="PeanutsButton">Peanuts</label>
<input type="checkbox" id="PeanutsButton" />
<label for="PorkButton">Pork</label>
<input type="checkbox" id="PorkButton" />
<label for="SoyButton">Soy</label>
<input type="checkbox" id="SoyButton" />
<label for="ShellfishButton">Shellfish</label>
<input type="checkbox" id="ShellfishButton" />
<label for="WheatButton">Wheat</label>
<input type="checkbox" id="WheatButton" />
</p>
<br />


		<div id='jqxWidget'>
            <div id='jqxMenu'>
                <ul>
                    <li id="World View">World View
                        <ul>
                            <li>
                            	<div data-tooltip="This is A1">A2</div>
                            </li>
                            <li>
                              	<div data-tooltip="This is A2">A2</div>
                            </li>
                            <li>
                              	<div data-tooltip="This is A3">A3</div>
                            </li>
                          </ul>
                        </li>
                    <li>About Us
                        <ul>
                            <li><a href="#">History</a></li>
                            <li><a href="#">Our Vision</a></li>
                        </ul>
                    </li>
                    <li>Products
                        <ul>
                            <li><a href="#">New</a>
                                <ul>
                                    <li><a href="#">D1</a></li>
                                    <li><a href="#">Private Use</a></li>
                                </ul>
                            </li>
                            <li><a href="#">Used</a>
                                <ul>
                                    <li><a href="#">Corporate Use</a></li>
                                    <li><a href="#">Private Use</a></li>
                                </ul>
                            </li>
                            <li><a href="#">Featured</a></li>
                         </ul>
                    </li>
                </ul>
            </div>
        </div>


<p>
Hint: Double click on one food in the list to see its full nutrition facts
</p>

<table>
  <tr>
    <th>Your Meal</th>
  </tr>
  <tr>
    <td> </td>
  </tr>
</table>
<p>
<label id="meal">Total calory    fat    protein</label>
<!--button id="showfull">Show Full</button-->
<button id="showfull" class="ui-button ui-corner-all ui-widget">
	<span class="ui-icon ui-icon-newwin"></span>Show Full
</button>
<button id="back" class="ui-button ui-corner-all ui-widget">
	<span class="ui-icon ui-icon-arrowreturnthick-1-w"></span>Back
</button>
</p>

<div id="fullnutrition" title="Nutrition Facts">
	<!--p>Full nutrition facts table of the meal</p-->
    <table>
      <tr>
        <th>Nutrition</th>
        <th>Total Amount</th>
      </tr>
      <tr>
        <td>Calory</td>
        <td>0</td>
      </tr>
      <tr>
        <td>Protein</td>
        <td>0</td>
      </tr>
      <tr>
        <td>Fat</td>
        <td>0</td>
      </tr>
      <tr>
        <td>Sodium</td>
        <td>0</td>
      </tr>
      <tr>
        <td>Cholesterol</td>
        <td>0</td>
      </tr>
      <tr>
        <td>Calcium</td>
        <td>0</td>
      </tr>
</div>
</body>

<link href="jquery-ui.css" rel="stylesheet">
<link rel="stylesheet" href="jqx/jqx.base.css" type="text/css" />
<!--script type="text/javascript" src="jquery-1.11.1.min.js"></script-->
<script type="text/javascript" src="jqx/jqxcore.js"></script>
<script type="text/javascript" src="jqx/jqxmenu.js"></script>
<script type="text/javascript" src="jqx/jqxtooltip.js"></script>
<script type="text/javascript" src="jqx/jqxcheckbox.js"></script>
<script type="text/javascript" src="jqx/jqxlistbox.js"></script>
<!--script src="external/jquery/jquery.js"></script-->
<script src="jquery-ui.js"></script>

<script>
// change the title with dining hall name, date and meal time
$(document).ready(function(){
    var obj=GetRequest();
    //alert(obj.date+"--"+obj.meal+"--"+obj.location);
	$("#location").append(obj.location + " on " + obj.date + " for " + obj.meal);
});

//add tags (they are buttons)
$("#VegeterianButton").button()
$("#GlutenFreeButton").button()
$("#LocalButton").button()
$("#KosherButton").button()
$("#HalalButton").button()
$("#VeganButton").button()
$("#EggButton").button()
$("#FishButton").button()
$("#DairyButton").button()
$("#TreeNutsButton").button()
$("#PeanutsButton").button()
$("#PorkButton").button()
$("#SoyButton").button()
$("#ShellfishButton").button()
$("#WheatButton").button()

$( "#tabs" ).tabs();

$( "#menu" ).menu();

//$( "#accordion" ).accordion();

/*
function getUrlParamValue(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
    var r = window.location.search.substr(1).match(reg);
    if (r != null) return decodeURIComponent(r[2]);
    return null;
}
*/

function GetRequest() {
   var url = location.search;
   //alert(url);
   var theRequest = new Object();
   if (url.indexOf("?") != -1) {
      var str = url.substr(1);
      strs = str.split("&");
      for(var i = 0; i < strs.length; i ++) {
         theRequest[strs[i].split("=")[0]]=decodeURIComponent((strs[i].split("=")[1]));
      }
   }
   return theRequest;
}

// below are two functions to toggle tag buttons on/off to indicate integredient and allergens
$(function () {
	var collection = $(".flag");
	$.each(collection, function () {
		$(this).addClass("start");
	});
});

function dj(dom) {
	var collection = $(".flag");
	$.each(collection, function () {
		$(this).removeClass("end");
		$(this).addClass("start");
	});
	$(dom).removeClass("start");
	$(dom).addClass("end");
}

// the dialog for meal's full nutritions
$( "#fullnutrition" ).dialog({
  autoOpen: false,
  width: 300
});

// function to show full nutritions of the meal with a dialog
$( "#showfull" ).click(function( event ) {
  $( "#fullnutrition" ).dialog( "open" );
  event.preventDefault();
});

// back to entrance page
$("#back").click(function(){
	  window.location.href="index.html";
  });
  
$(document).ready(function() {
    $("#jqxMenu").jqxMenu({
      width: 450,
      height: 30
    });

    var items = $("[data-tooltip]");
    for (var i = 0; i < items.length; i++) {
      var liElement = $(items[i]).parent();
      var content = $(items[i]).attr("data-tooltip");
      liElement.jqxTooltip({
        content: content
      });
    }
	
	//$('#jqxMenu').jqxMenu({animationHideDuration: 1000 });
	$('#jqxMenu').on('itemclick', function (event) {
    	var element = event.args;
		var itemtext = $(args).text();
		var that = this;
		setTimeout(function () {
			var dblclick = parseInt($(that).data('double'), 10);
			if (dblclick > 0) {
				alert("double click");
				$(that).data('double', dblclick - 1);
			} else {
				alert("click");
				$("#jqxWidget").jqxListBox('unselectIndex', index);
			}
		}, 300);
    });
});
</script>
</html>
